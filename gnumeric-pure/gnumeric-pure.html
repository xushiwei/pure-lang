<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.6: http://docutils.sourceforge.net/" />
<title>Gnumeric/Pure: A Pure Plugin for Gnumeric</title>
<meta name="author" content="Albert Graef" />
<meta name="copyright" content="Copyright (c) 2009 by Albert Graef. Distributed under the GNU Public License V3, see COPYING for details." />
<style type="text/css">

/*
:Author: David Goodger (goodger@python.org)
:Id: $Id: html4css1.css 5631 2008-08-24 13:01:23Z goodger $
:Copyright: This stylesheet has been placed in the public domain.

Default cascading style sheet for the HTML output of Docutils.

See http://docutils.sf.net/docs/howto/html-stylesheets.html for how to
customize this style sheet.
*/

/* used to remove borders from tables and images */
.borderless, table.borderless td, table.borderless th {
  border: 0 }

table.borderless td, table.borderless th {
  /* Override padding for "table.docutils td" with "! important".
     The right padding separates the table cells. */
  padding: 0 0.5em 0 0 ! important }

.first {
  /* Override more specific margin styles with "! important". */
  margin-top: 0 ! important }

.last, .with-subtitle {
  margin-bottom: 0 ! important }

.hidden {
  display: none }

a.toc-backref {
  text-decoration: none ;
  color: black }

blockquote.epigraph {
  margin: 2em 5em ; }

dl.docutils dd {
  margin-bottom: 0.5em }

/* Uncomment (and remove this text!) to get bold-faced definition list terms
dl.docutils dt {
  font-weight: bold }
*/

div.abstract {
  margin: 2em 5em }

div.abstract p.topic-title {
  font-weight: bold ;
  text-align: center }

div.admonition, div.attention, div.caution, div.danger, div.error,
div.hint, div.important, div.note, div.tip, div.warning {
  margin: 2em ;
  border: medium outset ;
  padding: 1em }

div.admonition p.admonition-title, div.hint p.admonition-title,
div.important p.admonition-title, div.note p.admonition-title,
div.tip p.admonition-title {
  font-weight: bold ;
  font-family: sans-serif }

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title {
  color: red ;
  font-weight: bold ;
  font-family: sans-serif }

/* Uncomment (and remove this text!) to get reduced vertical space in
   compound paragraphs.
div.compound .compound-first, div.compound .compound-middle {
  margin-bottom: 0.5em }

div.compound .compound-last, div.compound .compound-middle {
  margin-top: 0.5em }
*/

div.dedication {
  margin: 2em 5em ;
  text-align: center ;
  font-style: italic }

div.dedication p.topic-title {
  font-weight: bold ;
  font-style: normal }

div.figure {
  margin-left: 2em ;
  margin-right: 2em }

div.footer, div.header {
  clear: both;
  font-size: smaller }

div.line-block {
  display: block ;
  margin-top: 1em ;
  margin-bottom: 1em }

div.line-block div.line-block {
  margin-top: 0 ;
  margin-bottom: 0 ;
  margin-left: 1.5em }

div.sidebar {
  margin: 0 0 0.5em 1em ;
  border: medium outset ;
  padding: 1em ;
  background-color: #ffffee ;
  width: 40% ;
  float: right ;
  clear: right }

div.sidebar p.rubric {
  font-family: sans-serif ;
  font-size: medium }

div.system-messages {
  margin: 5em }

div.system-messages h1 {
  color: red }

div.system-message {
  border: medium outset ;
  padding: 1em }

div.system-message p.system-message-title {
  color: red ;
  font-weight: bold }

div.topic {
  margin: 2em }

h1.section-subtitle, h2.section-subtitle, h3.section-subtitle,
h4.section-subtitle, h5.section-subtitle, h6.section-subtitle {
  margin-top: 0.4em }

h1.title {
  text-align: center }

h2.subtitle {
  text-align: center }

hr.docutils {
  width: 75% }

img.align-left {
  clear: left }

img.align-right {
  clear: right }

ol.simple, ul.simple {
  margin-bottom: 1em }

ol.arabic {
  list-style: decimal }

ol.loweralpha {
  list-style: lower-alpha }

ol.upperalpha {
  list-style: upper-alpha }

ol.lowerroman {
  list-style: lower-roman }

ol.upperroman {
  list-style: upper-roman }

p.attribution {
  text-align: right ;
  margin-left: 50% }

p.caption {
  font-style: italic }

p.credits {
  font-style: italic ;
  font-size: smaller }

p.label {
  white-space: nowrap }

p.rubric {
  font-weight: bold ;
  font-size: larger ;
  color: maroon ;
  text-align: center }

p.sidebar-title {
  font-family: sans-serif ;
  font-weight: bold ;
  font-size: larger }

p.sidebar-subtitle {
  font-family: sans-serif ;
  font-weight: bold }

p.topic-title {
  font-weight: bold }

pre.address {
  margin-bottom: 0 ;
  margin-top: 0 ;
  font: inherit }

pre.literal-block, pre.doctest-block {
  margin-left: 2em ;
  margin-right: 2em }

span.classifier {
  font-family: sans-serif ;
  font-style: oblique }

span.classifier-delimiter {
  font-family: sans-serif ;
  font-weight: bold }

span.interpreted {
  font-family: sans-serif }

span.option {
  white-space: nowrap }

span.pre {
  white-space: pre }

span.problematic {
  color: red }

span.section-subtitle {
  /* font-size relative to parent (h1..h6 element) */
  font-size: 80% }

table.citation {
  border-left: solid 1px gray;
  margin-left: 1px }

table.docinfo {
  margin: 2em 4em }

table.docutils {
  margin-top: 0.5em ;
  margin-bottom: 0.5em }

table.footnote {
  border-left: solid 1px black;
  margin-left: 1px }

table.docutils td, table.docutils th,
table.docinfo td, table.docinfo th {
  padding-left: 0.5em ;
  padding-right: 0.5em ;
  vertical-align: top }

table.docutils th.field-name, table.docinfo th.docinfo-name {
  font-weight: bold ;
  text-align: left ;
  white-space: nowrap ;
  padding-left: 0 }

h1 tt.docutils, h2 tt.docutils, h3 tt.docutils,
h4 tt.docutils, h5 tt.docutils, h6 tt.docutils {
  font-size: 100% }

ul.auto-toc {
  list-style-type: none }

</style>
</head>
<body>
<div class="document" id="gnumeric-pure-a-pure-plugin-for-gnumeric">
<h1 class="title">Gnumeric/Pure: A Pure Plugin for Gnumeric</h1>
<table class="docinfo" frame="void" rules="none">
<col class="docinfo-name" />
<col class="docinfo-content" />
<tbody valign="top">
<tr><th class="docinfo-name">Author:</th>
<td>Albert Graef</td></tr>
<tr><th class="docinfo-name">Contact:</th>
<td><a class="first last reference external" href="mailto:Dr.Graef&#64;t-online.de">Dr.Graef&#64;t-online.de</a></td></tr>
<tr><th class="docinfo-name">Copyright:</th>
<td>Copyright (c) 2009 by Albert Graef. Distributed under the GNU
Public License V3, see COPYING for details.</td></tr>
</tbody>
</table>
<p>This package provides a Pure plugin loader and a sample script for use with
<a class="reference external" href="http://projects.gnome.org/gnumeric/">Gnumeric</a>. These work pretty much like the Perl and Python plugin loaders
which are distributed with Gnumeric. <a class="reference external" href="http://pure-lang.googlecode.com/">Pure</a> is a functional programming
language based on the term rewriting calculus with good support for math
operations, so it makes for a nice Gnumeric companion.</p>
<div class="section" id="installation">
<h1>Installation</h1>
<p>Unfortunately, typical Gnumeric installations lack some the headers needed to
compile Gnumeric plugins, so most likely you need to have <em>both</em> Gnumeric and
its sources installed to make this work. By default, the Makefile assumes that
the Gnumeric sources are in ../gnumerics-1.9.x and sets the include path
accordingly. If you have them elsewhere, check the beginning of the Makefile
for the variable you need to set to tell <tt class="docutils literal"><span class="pre">make</span></tt> about it.</p>
<p>Then run <tt class="docutils literal"><span class="pre">make</span></tt>. You might have to wrestle with the Makefile to make this
work. If you're lucky and the compile goes through, you should now have a
pure_loader.so file in the pure-loader subdirectory. You can install the
plugin and related stuff with <tt class="docutils literal"><span class="pre">sudo</span> <span class="pre">make</span> <span class="pre">install</span></tt> in the global Gnumeric
plugin directory (usually something like /usr/gnumeric/1.9.x/plugins), or if
you prefer to install into the Gnumeric's user plugin directory (usually
something like ~/.gnumeric/1.9.x/plugins) then run <tt class="docutils literal"><span class="pre">make</span> <span class="pre">install-local</span></tt>
instead. (Or you can just copy the pure-func and pure-loader directories
manually to your Gnumeric plugin directory.)</p>
</div>
<div class="section" id="usage">
<h1>Usage</h1>
<p>Once Gnumeric/Pure has been properly installed, you should see it in
Gnumeric's Tools/Plug-ins dialog. As with the Perl and Python plugins, there
are actually two entries, one labelled <tt class="docutils literal"><span class="pre">Pure</span> <span class="pre">functions</span></tt> and the other one
labelled <tt class="docutils literal"><span class="pre">Pure</span> <span class="pre">plugin</span> <span class="pre">loader</span></tt>. You need to enable both.</p>
<p>Now you should be ready to join the fun. Click on a cell and invoke the
<tt class="docutils literal"><span class="pre">f(x)</span></tt> dialog. The Pure functions available for use are shown in the
<tt class="docutils literal"><span class="pre">Pure</span></tt> category. E.g., click on <tt class="docutils literal"><span class="pre">pure_hello</span></tt>. Now the Pure interpreter
will be loaded and the function description displayed. Click <tt class="docutils literal"><span class="pre">Insert</span></tt> and
then <tt class="docutils literal"><span class="pre">Ok</span></tt>. You should now be able to read a friendly greeting returned by
the <tt class="docutils literal"><span class="pre">pure_hello</span></tt> function.</p>
<p>Please note that the Pure functions in the pure_func.pure module (in the
pure-func subdirectory) are just simple (and rather useless) examples. Well,
actually there are some useful examples, too, namely <tt class="docutils literal"><span class="pre">pure_eval</span></tt> which lets
you evaluate any Pure expression, and <tt class="docutils literal"><span class="pre">pure_echo</span></tt> which is useful for
debugging purposes.</p>
<p>After playing around with pure_func.pure for a while, of course you will want
to write your own functions, that's what this plugin is about after all! For
the beginning, you can just add your definitions to pure_func.pure.  See the
comments and the examples in pure_func.pure for guidance. Note that you need
to add the names of your new functions to the plugin.xml file, so that
Gnumeric knows about them. Once you understand how it works, you can also
create your own plugin directories with your personal collections of
Gnumeric/Pure functions, using the pure-func directory as a template.</p>
<p>The marshalling of types between Gnumeric and Pure is pretty straightforward;
numbers and strings map to numbers and strings, and Gnumeric arrays map to
Pure matrices. Lists returned from Pure also become Gnumeric arrays. Again,
see pure_funct.pure for examples.</p>
<p>In a future version, we'll also add the ability to directly call Gnumeric
functions from Pure, but for the time being you'll have to rely on passing
values between Gnumeric and Pure instead.</p>
<p>That's hopefully enough to get you started. More elaborate documentation will
hopefully be written in the future.</p>
</div>
</div>
</body>
</html>
