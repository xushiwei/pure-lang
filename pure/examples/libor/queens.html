<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.5: http://docutils.sourceforge.net/" />
<title>Some Solutions to the N Queens Problem</title>
<meta name="author" content="Libor Spacek (C) &lt;libors&#64;gmail.com&gt;" />
<meta name="date" content="Version 2: June 2009" />
<style type="text/css">

/*
:Author: David Goodger (goodger@python.org)
:Id: $Id: html4css1.css 5196 2007-06-03 20:25:28Z wiemann $
:Copyright: This stylesheet has been placed in the public domain.

Default cascading style sheet for the HTML output of Docutils.

See http://docutils.sf.net/docs/howto/html-stylesheets.html for how to
customize this style sheet.
*/

/* used to remove borders from tables and images */
.borderless, table.borderless td, table.borderless th {
  border: 0 }

table.borderless td, table.borderless th {
  /* Override padding for "table.docutils td" with "! important".
     The right padding separates the table cells. */
  padding: 0 0.5em 0 0 ! important }

.first {
  /* Override more specific margin styles with "! important". */
  margin-top: 0 ! important }

.last, .with-subtitle {
  margin-bottom: 0 ! important }

.hidden {
  display: none }

a.toc-backref {
  text-decoration: none ;
  color: black }

blockquote.epigraph {
  margin: 2em 5em ; }

dl.docutils dd {
  margin-bottom: 0.5em }

/* Uncomment (and remove this text!) to get bold-faced definition list terms
dl.docutils dt {
  font-weight: bold }
*/

div.abstract {
  margin: 2em 5em }

div.abstract p.topic-title {
  font-weight: bold ;
  text-align: center }

div.admonition, div.attention, div.caution, div.danger, div.error,
div.hint, div.important, div.note, div.tip, div.warning {
  margin: 2em ;
  border: medium outset ;
  padding: 1em }

div.admonition p.admonition-title, div.hint p.admonition-title,
div.important p.admonition-title, div.note p.admonition-title,
div.tip p.admonition-title {
  font-weight: bold ;
  font-family: sans-serif }

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title {
  color: red ;
  font-weight: bold ;
  font-family: sans-serif }

/* Uncomment (and remove this text!) to get reduced vertical space in
   compound paragraphs.
div.compound .compound-first, div.compound .compound-middle {
  margin-bottom: 0.5em }

div.compound .compound-last, div.compound .compound-middle {
  margin-top: 0.5em }
*/

div.dedication {
  margin: 2em 5em ;
  text-align: center ;
  font-style: italic }

div.dedication p.topic-title {
  font-weight: bold ;
  font-style: normal }

div.figure {
  margin-left: 2em ;
  margin-right: 2em }

div.footer, div.header {
  clear: both;
  font-size: smaller }

div.line-block {
  display: block ;
  margin-top: 1em ;
  margin-bottom: 1em }

div.line-block div.line-block {
  margin-top: 0 ;
  margin-bottom: 0 ;
  margin-left: 1.5em }

div.sidebar {
  margin: 0 0 0.5em 1em ;
  border: medium outset ;
  padding: 1em ;
  background-color: #ffffee ;
  width: 40% ;
  float: right ;
  clear: right }

div.sidebar p.rubric {
  font-family: sans-serif ;
  font-size: medium }

div.system-messages {
  margin: 5em }

div.system-messages h1 {
  color: red }

div.system-message {
  border: medium outset ;
  padding: 1em }

div.system-message p.system-message-title {
  color: red ;
  font-weight: bold }

div.topic {
  margin: 2em }

h1.section-subtitle, h2.section-subtitle, h3.section-subtitle,
h4.section-subtitle, h5.section-subtitle, h6.section-subtitle {
  margin-top: 0.4em }

h1.title {
  text-align: center }

h2.subtitle {
  text-align: center }

hr.docutils {
  width: 75% }

img.align-left {
  clear: left }

img.align-right {
  clear: right }

ol.simple, ul.simple {
  margin-bottom: 1em }

ol.arabic {
  list-style: decimal }

ol.loweralpha {
  list-style: lower-alpha }

ol.upperalpha {
  list-style: upper-alpha }

ol.lowerroman {
  list-style: lower-roman }

ol.upperroman {
  list-style: upper-roman }

p.attribution {
  text-align: right ;
  margin-left: 50% }

p.caption {
  font-style: italic }

p.credits {
  font-style: italic ;
  font-size: smaller }

p.label {
  white-space: nowrap }

p.rubric {
  font-weight: bold ;
  font-size: larger ;
  color: maroon ;
  text-align: center }

p.sidebar-title {
  font-family: sans-serif ;
  font-weight: bold ;
  font-size: larger }

p.sidebar-subtitle {
  font-family: sans-serif ;
  font-weight: bold }

p.topic-title {
  font-weight: bold }

pre.address {
  margin-bottom: 0 ;
  margin-top: 0 ;
  font-family: serif ;
  font-size: 100% }

pre.literal-block, pre.doctest-block {
  margin-left: 2em ;
  margin-right: 2em }

span.classifier {
  font-family: sans-serif ;
  font-style: oblique }

span.classifier-delimiter {
  font-family: sans-serif ;
  font-weight: bold }

span.interpreted {
  font-family: sans-serif }

span.option {
  white-space: nowrap }

span.pre {
  white-space: pre }

span.problematic {
  color: red }

span.section-subtitle {
  /* font-size relative to parent (h1..h6 element) */
  font-size: 80% }

table.citation {
  border-left: solid 1px gray;
  margin-left: 1px }

table.docinfo {
  margin: 2em 4em }

table.docutils {
  margin-top: 0.5em ;
  margin-bottom: 0.5em }

table.footnote {
  border-left: solid 1px black;
  margin-left: 1px }

table.docutils td, table.docutils th,
table.docinfo td, table.docinfo th {
  padding-left: 0.5em ;
  padding-right: 0.5em ;
  vertical-align: top }

table.docutils th.field-name, table.docinfo th.docinfo-name {
  font-weight: bold ;
  text-align: left ;
  white-space: nowrap ;
  padding-left: 0 }

h1 tt.docutils, h2 tt.docutils, h3 tt.docutils,
h4 tt.docutils, h5 tt.docutils, h6 tt.docutils {
  font-size: 100% }

ul.auto-toc {
  list-style-type: none }

</style>
</head>
<body>
<div class="document" id="some-solutions-to-the-n-queens-problem">
<h1 class="title">Some Solutions to the N Queens Problem</h1>
<table class="docinfo" frame="void" rules="none">
<col class="docinfo-name" />
<col class="docinfo-content" />
<tbody valign="top">
<tr><th class="docinfo-name">Author:</th>
<td>Libor Spacek (C) &lt;<a class="reference external" href="mailto:libors&#64;gmail.com">libors&#64;gmail.com</a>&gt;</td></tr>
<tr class="field"><th class="docinfo-name">License:</th><td class="field-body">GPL V3</td>
</tr>
<tr><th class="docinfo-name">Date:</th>
<td>Version 2: June 2009</td></tr>
</tbody>
</table>
<!--  -->
<p><strong>Example usage:</strong></p>
<blockquote>
<p># pure -i queens.pure</p>
<p>&gt;fullboard (thequeens 50);</p>
</blockquote>
<!--  -->
<p><strong>(diagsafe j l)</strong></p>
<blockquote>
is square j in current row safe from the diagonal attacks by previously
placed queens in list l? id is the +ve rows difference  used in
local recursion to check all the occupied rows</blockquote>
<!--  -->
<p><strong>(fullboard s)</strong></p>
<blockquote>
full coordinates representation [(row,column),...] is redundant
because the first coordinate of any solution will always be 1..n.
However, it can be reconstructed with, e.g.: (fullboard (thequeens n));
By default all solutions here are encoded as the columns permutations only,
[column, ...], leaving out the ordered rows.
In all cases rows and columns are interchangeable without affecting
the solutions, i.e. reading the same numbers as [row, ....] for ordered
columns is also valid.</blockquote>
<!--  -->
<p><strong>(allqueens n)</strong></p>
<blockquote>
<p>returns all possible solutions by constrained search.
N.B. nobody has so far been able to find out, by any known method, the number
of solutions for n=26 and beyond. Allqueens, which is quite fast,
starts getting breathless beyond n=13 with the total number of
solutions = 73,712.</p>
<p>Only half of the first row is considered for the first queen,
thus halving the total search effort,
followed by adding a reflection of all the solutions found
about the middle column.
Odd sized boards must have additionally the first midrow starting position
searched and add its solutions.
More reflections and rotations could be done but the solutions
would have to be   tested for duplicates.
All rook checking (row and column) is eliminated by using only unused
candidates list c (generating only valid permutations),
leaving just a single check, id==abs(j2-j),
to perform for the bishop (both diagonals).</p>
<blockquote>
&gt;allqueens 8; returns all 92 solutions, as a list of lists</blockquote>
</blockquote>
<!--  -->
<p><strong>(queens n)</strong></p>
<!--  -->
<p><strong>(tailqueens n)</strong></p>
<blockquote>
this concise backtracking tailrecursive version
throws a single solution which is the rows reflection
of that found by &quot;queens&quot;</blockquote>
<!--  -->
<p><strong>(thequeens n)</strong></p>
<blockquote>
<p>encodes my no search regular solution in just 12 lines of code,
which is to my knowledge the simplest and fastest known algorithm for
the N-Queens problem. It is very fast even for large boards.</p>
<p>There always exists one symmetrical (under 180 degrees rotation)
solution of this form, producing an orbit of just 4 equivalent solutions,
instead of the usual 8. The correct pattern is generated directly without
any checking or searching being necessary.
The solutions had been tested exhaustively for board sizes 0 to 5000
and individually for board size 50000x50000.</p>
</blockquote>
<!-- The rest are test utilities -->
<p><strong>(safe j l)</strong></p>
<blockquote>
is square j in current row safe from any attacks by previously
placed queens in list l? id is the +ve rows difference used for recursion
with rsafe</blockquote>
<!--  -->
<p><strong>(checkqs l)</strong></p>
<blockquote>
checks one solution either in 0..n-1 encoding or in 1..n
encoding. It returns 1 for a correct result, including &quot;nosolution&quot;
for sizes 2 and 3; 0 is returned if a queen attack exists anywhere
within the presented 'solution'.</blockquote>
<!--  -->
<p><strong>(queenstest method l)</strong></p>
<blockquote>
<p>conducts exhaustive tests of solutions for boards of all listed sizes. Usage:</p>
<blockquote>
<p>&gt;queenstest (id) (allqueens 8);</p>
<p>&gt;queenstest queens (1..10);</p>
<p>&gt;queenstest tailqueens ([5,6,7]);</p>
<p>&gt;queenstest thequeens (5000:4999..100);</p>
</blockquote>
</blockquote>
</div>
</body>
</html>
