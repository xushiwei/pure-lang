
% This is the preamble used to adjust the formatting of the TeX/PDF version of
% the manual. Edit as needed.

% Uncomment for A4 paper.
\usepackage{a4wide}

% Better use sloppy formatting, to avoid bad line breaks.
\sloppy

% We use Palatino for the main text, Bera Mono for typewriter, and Helvetica
% Narrow for section titles. These should be available in most recent TeX
% installations, YMMV. So you might have to fiddle with the definitions below.

\usepackage{mathpazo}

\usepackage[T1]{fontenc}
\usepackage{textcomp}
\usepackage[scaled=0.86]{beramono}

\usepackage{sectsty}
\allsectionsfont{\usefont{OT1}{phv}{bc}{n}}

\usepackage[titles]{tocloft}
\renewcommand{\cftsecfont}{\usefont{OT1}{phv}{bc}{n}}
\setlength{\cftsubsecnumwidth}{2.5em}

% Nicely formatted program listings.
\usepackage{listings}
\lstdefinelanguage{Pure}
{morekeywords={case,when,with,end,const,def,else,extern,if,infix,infixl,infixr,let,namespace,nonfix,of,otherwise,outfix,private,public,prefix,postfix,then,using},
 sensitive=true,
 morecomment=[l]{//},
 morecomment=[s]{/*}{*/},
 morestring=[b]",
}
\lstset{language=pure,columns=flexible}
\lstset{basicstyle=\ttfamily,keepspaces=true,commentstyle=,showstringspaces=false}

% Set up the hyperref package.
\usepackage[breaklinks]{hyperref}
\hypersetup{bookmarksnumbered,pdfborder=0 0 0}

% Some hacks to make the hyperlinks look nicer.
\usepackage{patchcmd}
\makeatletter
\newcommand{\before@hyperref}{}
\newcommand{\fancyhref}{\renewcommand{\before@hyperref}{$\triangleright$}}
\newcommand{\plainhref}{\renewcommand{\before@hyperref}{}}
\patchcommand\href{\before@hyperref}{}
\patchcommand\hyperref{\before@hyperref}{}
\fancyhref
\makeatother

% Make the docutils optionlist environment look nicer.
\ifthenelse{\isundefined{\optionlistlabel}}{
% Presumably we have a new snapshot of rst2latex which already has the
% DUoptionlist environment.
\newenvironment{DUoptionlist}[1]
{\begin{list}{}{\renewcommand{\makelabel}{\DUoptionlistlabel}}}{\end{list}}
\newcommand{\DUoptionlistlabel}[1]{\texttt{\textbf{#1}} \hfill}
}{
% "Old" rst2latex. We need to override the existing optionlist environment.
\renewenvironment{optionlist}[1]
{\begin{list}{}{\renewcommand{\makelabel}{\optionlistlabel}}}{\end{list}}
\renewcommand{\optionlistlabel}[1]{\texttt{\textbf{#1}} \hfill}
}
